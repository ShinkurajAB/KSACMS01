@attribute [Route(Utility.RouteData.MyDocumentation)]
@attribute [Authorize]
@layout DashboardLayout



<div class="flex justify-between items-center  my-4">
    <h2 class="text-xl font-semibold text-gray-800 ">Document Management</h2>

    <button @onclick="CreateDocument" class="main-bg-dark-color shadow-theme-xs hover:bg-brand-600 inline-flex items-center justify-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M5 10.0002H15.0006M10.0002 5V15.0006" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
        Create Document
    </button>
</div>




    @if (pagination.AttachmentDetails.Count > 0)
    {
    <div class=" rounded-xl border border-gray-200 ">
        <table class="min-w-full text-left text-gray-700 ">
            <thead class="bg-gray-200 ">
                <tr class="border-b border-gray-100">
                    <th class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-700 ">#</th>
                    <th class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-700 ">Name of the Entity</th>
                    <th class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-700 ">Start Date</th>
                    <th class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-700 ">Expiration Date</th>
                    <th class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-700 ">Type</th>
                    <th class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-700 ">Attachment</th>
                    <th class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-700 ">
                        Action
                    </th>


                </tr>
            </thead>
            <tbody id="vehicleTable">

                @foreach (var item in pagination.AttachmentDetails)
                {
                    <tr>
                        
                        <td class="px-5 py-3 text-sm whitespace-nowrap text-gray-500 bg-white">@item.ID</td>
                        <td class="px-5 py-3 text-sm whitespace-nowrap text-gray-500 bg-white">
                            @item.EntityName
                        </td>
                        <td class="px-5 py-3 text-sm whitespace-nowrap text-gray-500 bg-white">
                            @Convert.ToDateTime(item.StartDate).ToString("dd-MM-yyyy")
                        </td>
                        <td class="px-5 py-3 text-sm whitespace-nowrap text-gray-500 bg-white">
                            @Convert.ToDateTime(item.ExpiryDate).ToString("dd-MM-yyyy")
                        </td>

                        <td class="px-5 py-3 text-sm whitespace-nowrap text-gray-500 bg-white">
                            @item.documentType.ToString()
                        </td>

                        <td class="px-5 py-3 text-sm whitespace-nowrap text-gray-500 bg-white">
                            <button @onclick="() => DownloadFile(item.FileName)" class="flex gap-1 border rounded-md py-1 px-2 main-bg-dark-color text-white text-xs" @onclick="ViewAttachment">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
     class="icon icon-tabler icons-tabler-outline icon-tabler-download">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" />
    <path d="M7 11l5 5l5 -5" />
    <path d="M12 4v12" />
</svg>

                                
                                Download
                            </button>

                            
                        </td>
                         
                        <td class="px-5 py-3 text-sm font-medium whitespace-nowrap text-gray-800 bg-white relative">
                            <button class="three-btn border border-gray-800 rounded-md " onclick="toggleThreeDotMenu()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="main-color icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>
                            </button>
                            <div class="z-10 dropdown absolute right-2 top-10  bg-white border shadow rounded hidden
                                                opacity-0 scale-95 transition-all duration-200">
                                <button @onclick="() => EditModalCall(item.ID)" class=" flex w-full items-center gap-2 rounded-t-md border-b p-2 hover:bg-gray-100">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-600 icon icon-tabler icons-tabler-outline icon-tabler-file-pencil"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M10 18l5 -5a1.414 1.414 0 0 0 -2 -2l-5 5v2h2z" /></svg>
                                    Edit
                                </button>
                                <button @onclick="() => DeleteConfirmModal(item.ID)" class=" flex items-center gap-2 w-full rounded-b-md  p-2 hover:bg-gray-100">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-600 icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>
                                    Delete
                                </button>
                            </div>



                        </td>

                    </tr>
                }



            </tbody>
        </table>
    </div>

        <div class="flex justify-center mt-5">
        <PaginationComponent selected="@pagination.PageIndex"
                             TotalCount="@pagination.TotalPage"
                             SelectedPageChanged="PaginationResponse" />
                             </div>
    }







<SwitchCMS.Component.Pages.Dashboard.Document.DocumentationComponents.DocumentationCreateUpdate ParmDocID="EditedID" CreateOrNoEvent="ModalResponse" />

<DeleteConfirmModal Message="@DeleteConfirmModalMessage" OnSubmit="DeleteConfirmed" />

<AlertMessage ParmMessage="@AlertMessage" ParmSucessOrFaild="@SuccessOrFaild" />